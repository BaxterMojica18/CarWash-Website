name: Code Quality

on:
  pull_request:
    branches: [ main ]

jobs:
  code-review:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Check file changes
      run: |
        echo "ğŸ“ Files changed in this PR:"
        git diff --name-only origin/main...HEAD
    
    - name: Check for sensitive data
      run: |
        echo "ğŸ”’ Checking for sensitive data..."
        if grep -r "password.*=" --include="*.py" --include="*.js" --exclude-dir=".git" .; then
          echo "âš ï¸ Warning: Potential hardcoded passwords found"
        else
          echo "âœ… No hardcoded passwords detected"
        fi
      continue-on-error: true
    
    - name: Check code size
      run: |
        echo "ğŸ“Š Code statistics:"
        echo "Python files: $(find . -name '*.py' | wc -l)"
        echo "JavaScript files: $(find . -name '*.js' | wc -l)"
        echo "HTML files: $(find . -name '*.html' | wc -l)"
    
    - name: Validate JSON files
      run: |
        echo "ğŸ” Validating JSON files..."
        for file in $(find . -name "*.json" -not -path "./node_modules/*"); do
          python -m json.tool "$file" > /dev/null && echo "âœ… $file" || echo "âŒ $file"
        done
      continue-on-error: true
