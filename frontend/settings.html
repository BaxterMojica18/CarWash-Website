<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Settings - Car Wash Management</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <button class="menu-toggle" onclick="toggleMenu()">‚ò∞</button>
    <nav class="sidebar" id="sidebar">
        <div class="logo">
            <span id="sidebarLogo">üöó</span>
            <h2 id="sidebarName">CarWash</h2>
        </div>
        <ul>
            <li><a href="dashboard.html">Dashboard</a></li>
            <li><a href="invoices.html">Invoices</a></li>
            <li><a href="order-management.html">Orders</a></li>
            <li><a href="products.html">Products</a></li>
            <li><a href="services.html">Services</a></li>
            <li><a href="reports.html">Reports</a></li>
            <li><a href="settings.html" class="active">Settings</a></li>
            <li><a href="login.html" onclick="logout()">Logout</a></li>
        </ul>
    </nav>
    <main class="content">
        <header>
            <h1>Settings</h1>
        </header>
        <div class="settings-section" id="userManagementSection" style="display: none;">
            <div class="section-header">
                <h2>User Management</h2>
                <div style="display: flex; gap: 10px;">
                    <button class="btn-primary" onclick="window.location.href='permissions-management.html'">üîê Manage Permissions</button>
                    <button class="btn-primary" onclick="showAddUser()">+ Add User</button>
                </div>
            </div>
            <div class="users-grid" id="usersGrid">
            </div>
        </div>
        <div class="settings-section">
            <div class="section-header">
                <h2>Washing Bays</h2>
                <button class="btn-primary" id="addBayBtn" onclick="showAddBay()" style="display: none;">+ Add Bay</button>
            </div>
            <div class="bays-grid" id="baysGrid">
            </div>
        </div>
        <div class="settings-section">
            <h2>Theme Customization</h2>
            <div class="form-group">
                <label>Saved Presets</label>
                <select id="presetSelect" onchange="loadPreset()">
                    <option value="">-- Select Preset --</option>
                </select>
            </div>
            <form id="themeForm">
                <div class="form-group">
                    <label>Preset Name</label>
                    <input type="text" id="presetName" placeholder="My Custom Theme" required>
                </div>
                <div class="theme-grid">
                    <div class="form-group">
                        <label>Text Color</label>
                        <select id="textColor">
                            <option value="black">Black</option>
                            <option value="dark-grey">Dark Grey</option>
                            <option value="white">White</option>
                        </select>
                        <label>Brightness: <span id="textBrightVal">100</span>%</label>
                        <input type="range" id="textBrightness" min="50" max="150" value="100">
                    </div>
                    <div class="form-group">
                        <label>Card Color</label>
                        <select id="cardColor">
                            <option value="white">White</option>
                            <option value="grey">Grey</option>
                            <option value="dark-blue">Dark Blue</option>
                        </select>
                        <label>Brightness: <span id="cardBrightVal">100</span>%</label>
                        <input type="range" id="cardBrightness" min="50" max="150" value="100">
                    </div>
                    <div class="form-group">
                        <label>Input Field Color</label>
                        <select id="inputColor">
                            <option value="white">White</option>
                            <option value="grey">Grey</option>
                            <option value="dark-blue">Dark Blue</option>
                        </select>
                        <label>Brightness: <span id="inputBrightVal">100</span>%</label>
                        <input type="range" id="inputBrightness" min="50" max="150" value="100">
                    </div>
                    <div class="form-group">
                        <label>Dropdown Color</label>
                        <select id="dropdownColor">
                            <option value="white">White</option>
                            <option value="grey">Grey</option>
                            <option value="dark-blue">Dark Blue</option>
                        </select>
                        <label>Brightness: <span id="dropdownBrightVal">100</span>%</label>
                        <input type="range" id="dropdownBrightness" min="50" max="150" value="100">
                    </div>
                    <div class="form-group">
                        <label>Button Color</label>
                        <input type="color" id="buttonColor" value="#667eea">
                    </div>
                    <div class="form-group">
                        <label>Sidebar Color</label>
                        <input type="color" id="sidebarColor" value="#2c3e50">
                    </div>
                    <div class="form-group">
                        <label>Sidebar Active Button</label>
                        <input type="color" id="sidebarActiveColor" value="#34495e">
                    </div>
                    <div class="form-group">
                        <label>Background Color</label>
                        <input type="color" id="bgColor" value="#f5f5f5">
                    </div>
                </div>
                <h3 style="margin-top: 20px; margin-bottom: 15px;">Delete Button Configuration</h3>
                <div class="theme-grid">
                    <div class="form-group">
                        <label>Delete Button Brightness</label>
                        <label>Brightness: <span id="deleteBrightVal">100</span>%</label>
                        <input type="range" id="deleteBrightness" min="50" max="150" value="100">
                    </div>
                    <div class="form-group">
                        <label>Delete Button Saturation</label>
                        <label>Saturation: <span id="deleteSatVal">100</span>%</label>
                        <input type="range" id="deleteSaturation" min="0" max="100" value="100">
                    </div>
                </div>
                <div style="margin-top: 20px;">
                </div>
                <button type="button" class="btn-primary" onclick="previewTheme()">Preview</button>
                <button type="submit" class="btn-primary">Save as Preset</button>
            </form>
        </div>
        <div class="settings-section">
            <h2>Invoice Customization</h2>
            <form id="invoiceCustomForm">
                <div class="form-group">
                    <label>Invoice Address</label>
                    <input type="text" id="invoiceAddress" placeholder="123 Main Street">
                </div>
                <div class="form-group">
                    <label>Invoice Phone</label>
                    <input type="tel" id="invoicePhone" placeholder="(555) 123-4567">
                </div>
                <div class="form-group">
                    <label>Invoice Email</label>
                    <input type="email" id="invoiceEmail" placeholder="info@carwash.com">
                </div>
                <button type="submit" class="btn-primary">Save Invoice Settings</button>
            </form>
        </div>
        <div class="settings-section">
            <div class="section-header">
                <h2>Payment Methods</h2>
                <button class="btn-primary" onclick="showAddPaymentMethod()">+ Add Payment Method</button>
            </div>
            <div class="bays-grid" id="paymentMethodsGrid">
            </div>
        </div>
        <div class="settings-section" id="dashboardCustomSection" style="display: none;">
            <h2>Dashboard Customization</h2>
            <form id="dashboardCustomForm">
                <div class="form-group">
                    <label>Website Name</label>
                    <input type="text" id="websiteName" placeholder="CarWash" required>
                </div>
                <div class="form-group">
                    <label>Primary Color</label>
                    <input type="color" id="primaryColor" value="#667eea">
                </div>
                <div class="form-group">
                    <label>Background Color</label>
                    <input type="color" id="backgroundColor" value="#f5f5f5">
                </div>
                <div class="form-group">
                    <label>Sidebar Color</label>
                    <input type="color" id="sidebarColorCustom" value="#2c3e50">
                </div>
                <div class="form-group">
                    <label>Layout Type</label>
                    <select id="layoutType">
                        <option value="grid">Grid</option>
                        <option value="list">List</option>
                        <option value="compact">Compact</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Save Dashboard Settings</button>
                <button type="button" class="btn-primary" onclick="window.location.href='edit-dashboard.html'" style="margin-left: 10px;">‚úèÔ∏è Edit Dashboard</button>
            </form>
            
            <h3 style="margin-top: 30px;">Dashboard Modules</h3>
            <button class="btn-primary" onclick="showAddModule()" style="margin-bottom: 15px;">+ Add Module</button>
            <div id="modulesList"></div>
        </div>
        
        <div class="settings-section">
            <h2>Business Information</h2>
            <form id="businessForm">
                <div class="form-group">
                    <label>Business Name</label>
                    <input type="text" id="businessName" value="Premium Car Wash">
                </div>
                <div class="form-group">
                    <label>Logo</label>
                    <div class="logo-upload">
                        <div class="logo-preview" id="logoPreview">
                            <span id="currentLogo">üöó</span>
                        </div>
                        <div class="form-group">
                            <label>Predefined Logos</label>
                            <select id="logoSelect" onchange="selectPredefinedLogo()">
                                <option value="üöó">üöó Car</option>
                                <option value="üíß">üíß Water Drop</option>
                                <option value="ü´ß">ü´ß Bubbles</option>
                                <option value="‚ú®">‚ú® Sparkles</option>
                                <option value="üßº">üßº Soap</option>
                                <option value="üöø">üöø Shower</option>
                            </select>
                        </div>
                        <p style="font-size: 12px; opacity: 0.7; margin: 10px 0;">Or upload custom logo:</p>
                        <input type="file" id="logoFile" accept="image/*" onchange="previewLogo()">
                    </div>
                </div>
                <div class="form-group">
                    <label>Address</label>
                    <input type="text" value="123 Main Street">
                </div>
                <div class="form-group">
                    <label>Phone</label>
                    <input type="tel" value="(555) 123-4567">
                </div>
                <button type="submit" class="btn-primary">Save Changes</button>
            </form>
        </div>
        <div id="addUserModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeUserModal()">&times;</span>
                <h2 id="userModalTitle">Add User</h2>
                <form id="userForm">
                    <input type="hidden" id="editUserId">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="userName" required>
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="userEmail" required>
                    </div>
                    <div class="form-group">
                        <label>Role</label>
                        <select id="userRole" required>
                            <option value="staff">Staff</option>
                            <option value="owner">Owner</option>
                            <option value="admin">Admin</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary" id="userSubmitBtn">Add User</button>
                </form>
            </div>
        </div>
        <div id="editPermissionsModal" class="modal">
            <div class="modal-content" style="max-width: 800px; max-height: 90vh; overflow-y: auto;">
                <span class="close" onclick="closePermissionsModal()">&times;</span>
                <h2>Edit User Permissions</h2>
                <p id="permUserEmail" style="color: #666; margin-bottom: 20px;"></p>
                <form id="permissionsForm">
                    <input type="hidden" id="permUserId">
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div class="form-group">
                            <h3>Invoice Permissions</h3>
                            <label><input type="checkbox" name="permission" value="add_invoice"> Add Invoice</label><br>
                            <label><input type="checkbox" name="permission" value="edit_invoice"> Edit Invoice</label><br>
                            <label><input type="checkbox" name="permission" value="delete_invoice"> Delete Invoice</label>
                        </div>
                        <div class="form-group">
                            <h3>Product Permissions</h3>
                            <label><input type="checkbox" name="permission" value="add_product"> Add Product</label><br>
                            <label><input type="checkbox" name="permission" value="edit_product"> Edit Product</label><br>
                            <label><input type="checkbox" name="permission" value="delete_product"> Delete Product</label>
                        </div>
                        <div class="form-group">
                            <h3>Service Permissions</h3>
                            <label><input type="checkbox" name="permission" value="add_service"> Add Service</label><br>
                            <label><input type="checkbox" name="permission" value="edit_service"> Edit Service</label><br>
                            <label><input type="checkbox" name="permission" value="delete_service"> Delete Service</label>
                        </div>
                        <div class="form-group">
                            <h3>Bay Permissions</h3>
                            <label><input type="checkbox" name="permission" value="add_bay"> Add Bay</label><br>
                            <label><input type="checkbox" name="permission" value="edit_bay"> Edit Bay</label><br>
                            <label><input type="checkbox" name="permission" value="delete_bay"> Delete Bay</label>
                        </div>
                        <div class="form-group" style="grid-column: span 2;">
                            <h3>Other Permissions</h3>
                            <label><input type="checkbox" name="permission" value="edit_theme"> Edit Theme Options</label><br>
                            <label><input type="checkbox" name="permission" value="view_reports"> View Reports</label><br>
                            <label><input type="checkbox" name="permission" value="manage_users"> Manage Users</label>
                        </div>
                    </div>
                    <button type="submit" class="btn-primary" style="margin-top: 20px;">Save Permissions</button>
                </form>
            </div>
        </div>
        <div id="addPaymentMethodModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closePaymentMethodModal()">&times;</span>
                <h2 id="paymentMethodModalTitle">Add Payment Method</h2>
                <form id="paymentMethodForm">
                    <input type="hidden" id="editPaymentMethodId">
                    <div class="form-group">
                        <label>Payment Method Name</label>
                        <input type="text" id="paymentMethodName" placeholder="e.g., Credit Card" required>
                    </div>
                    <div class="form-group">
                        <label>Icon (Emoji)</label>
                        <input type="text" id="paymentMethodIcon" placeholder="üí≥" maxlength="2" required>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="paymentMethodStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary" id="paymentMethodSubmitBtn">Add Payment Method</button>
                </form>
            </div>
        </div>
        <div id="addModuleModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeModuleModal()">&times;</span>
                <h2 id="moduleModalTitle">Add Dashboard Module</h2>
                <form id="moduleForm">
                    <input type="hidden" id="editModuleId">
                    <div class="form-group">
                        <label>Module Name</label>
                        <input type="text" id="moduleName" required>
                    </div>
                    <div class="form-group">
                        <label>Module Type</label>
                        <select id="moduleType" required>
                            <option value="stat">Statistic Card</option>
                            <option value="chart">Chart</option>
                            <option value="table">Table</option>
                            <option value="list">List</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="moduleTitle" required>
                    </div>
                    <div class="form-group">
                        <label>Width</label>
                        <select id="moduleWidth">
                            <option value="full">Full Width</option>
                            <option value="half">Half Width</option>
                            <option value="third">Third Width</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Position</label>
                        <input type="number" id="modulePosition" value="0" min="0">
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="moduleVisible" checked>
                            Visible
                        </label>
                    </div>
                    <button type="submit" class="btn-primary" id="moduleSubmitBtn">Add Module</button>
                </form>
            </div>
        </div>
        
        <div id="addBayModal" class="modal">
            <div class="modal-content">
                <span class="close" onclick="closeBayModal()">&times;</span>
                <h2 id="bayModalTitle">Add Washing Bay</h2>
                <form id="bayForm">
                    <input type="hidden" id="editBayId">
                    <div class="form-group">
                        <label>Bay Name</label>
                        <input type="text" id="bayName" required>
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="bayStatus">
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary" id="baySubmitBtn">Add Bay</button>
                </form>
            </div>
        </div>
    </main>
    <script src="js/api.js"></script>
    <script src="js/menu.js"></script>
    <script src="js/toast.js"></script>
    <script src="js/settings.js"></script>
</body>
</html>
